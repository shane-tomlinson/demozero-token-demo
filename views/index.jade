extends layout

block content
  div(class="jumbotron")
    h1(class="display-4")= title
    p(class="lead") Welcome to the Organizations demo.
  #msg
  div(class="row mt-3")
    div(class="col-sm-12")
      div(class="card")
        h5(class="card-header") Login with Organization
        div(class="card-body")
          form(name="org-select" method="post" action="orgselect")
            div(class="form-group")
              <label for="organization_id">Organization</label>
              select(id="organization_id" name="organization_id" class="form-control")
                each organization in organizations
                  option(value=organization.id + '|' + organization.name) #{organization.name}
              label
                input(type="checkbox", name="sendorgname")
                = " Send Organization Name"
            input(type="submit" value="Login to organization" class="btn btn-primary")
  div(class="row mt-3")
    div(class="col-sm-6")
      div(class="card")
        h5(class="card-header") Login with invalid organization id
        div(class="card-body")
          p(class="card-text") We'll pass an invalid organization id (org_xyz)
          a(href="login?organization=org_foo")
            button(id="signinButton" class="btn btn-primary") Login with invalid organization id
    div(class="col-sm-6")
      div(class="card")
        h5(class="card-header") Login with no organization
        div(class="card-body")
          p(class="card-text") Omit the organization parameter completely
          form(name="login" method="get" action="login")
            input(type="submit" value="Login with no organization" class="btn btn-primary" )
            div
              label
                input(type="checkbox", name="scalogin")
                = " SCA login"
  div(class="row mt-3")
    div(class="col-sm-6")
      div(class="card")
        h5(class="card-header") Login with PAR
        div(class="card-body")
          p(class="card-text") Use a pushed authorization request (PAR)
          a(href="loginWithPar")
          form(name="par" method="post" action="loginWithPar")
            div(class="form-group")
              label(for="authorization_details") authorization_details
              textarea(id="authorization_details" name="authorization_details" class="form-control" placeholder='[{"type":"urn:auth0:temp:sca"}]') [{"type":"urn:auth0:temp:sca", "merchant":"Deliveroo", "amount": "£16.76"}]
            input(type="submit" value="Login with PAR" class="btn btn-primary")
    div(class="col-sm-6")
      div(class="card")
        h5(class="card-header") Login with RAR
        div(class="card-body")
          p(class="card-text") Use a rich authorization request (RAR)
          form(name="rar" method="post" action="rar")
            div(class="form-group")
              label(for="authorization_details") authorization_details
              textarea(id="authorization_details" name="authorization_details" class="form-control" placeholder='[{"type":"urn:auth0:temp:sca"}]') [{"type":"urn:auth0:temp:sca", "merchant":"Deliveroo", "amount": "£16.76"}]
            input(type="submit" value="Login with RAR" class="btn btn-primary")
  div(class="row mt-3")
    div(class="col-sm-12")
      div(class="card")
        h5(class="card-header") Invitations
        div(class="card-body")
          form(name="org-invite" method="post" action="invite")
            div(class="form-group")
              <label for="email">Email address</label>
              input(id="email" name="email" value="hinerman@gmail.com", class="form-control", size="20")
              small(id="emailHelp" class="form-text text-muted") Any user with this email will be deleted first, to simulate a "fresh" invite.
            div(class="form-group")
              <label for="connection_id">Connection (Optional)</label>
              select(id="connection_id", name="connection_id", class="form-control")
                option(value="not-specified") Not specified
                each connection in connections
                  option(value=connection.id) #{connection.name}
            div(class="form-group")
              <label for="organization_id">Organization</label>
              select(id="organization_id", name="organization_id", class="form-control")
                each organization in organizations
                  option(value=organization.id) #{organization.name}
            div(class="form-group")
              <label for="role_id">Role</label>
              select(id="role_id" name="role_id" class="form-control")
                each role in roles
                  option(value=role.id) #{role.name}
            input(type="submit" value="Invite User" class="btn btn-primary")
  div(class="row mt-3")
    div(class="col-sm-12")
      div(class="card")
        h5(class="card-header") SAML: Login with Organization
        div(class="card-body")
          form(name="org-select" method="post" action="saml/orgselect")
            div(class="form-group")
              <label for="organization_id">Organization</label>
              select(id="organization_id" name="organization_id" class="form-control")
                each organization in organizations
                  option(value=organization.id + '|' + organization.name) #{organization.name}
              label
                input(type="checkbox", name="sendorgname")
                = " Send Organization Name"
            input(type="submit" value="SAML Login to organization" class="btn btn-primary")
  div(class="row mt-3")
    div(class="col-sm-6")
      div(class="card")
        h5(class="card-header") SAML: Login with invalid organization id
        div(class="card-body")
          p(class="card-text") We'll pass an invalid organization id (org_xyz)
          a(href="saml/login?organization=org_foo")
            button(id="signinButton" class="btn btn-primary") SAML Login with invalid organization id
    div(class="col-sm-6")
      div(class="card")
        h5(class="card-header") SAML: Login with no organization
        div(class="card-body")
          p(class="card-text") Omit the organization parameter completely
          a(href="saml/login")
            button(id="signinButton" class="btn btn-primary") SAML Login with no organization
  div(class="row mt-3")
    div(class="col-sm-12")
      div(class="card")
        h5(class="card-header") Runtime Configuration
        div(class="card-body")
          form(name="configuration" method="post" action="saveconfiguration")
            div(class="form-group")
              <label for="audience">Audience</label>
              select(id="audience" name="audience" class="form-control")
                option
                each audience in audienceList
                  if (selectedAudience === audience)
                    option(value=audience selected) #{audience}
                  else
                    option(value=audience ) #{audience}
            div(class="form-group")
              <label for="audience">Scope</label>
              input(id="scope" name="scope" value="#{scope}", class="form-control", size="20")
            div(class="form-group")
              <label for="response_type">Response type</label>
              select(id="response_type" name="response_type" class="form-control")
                each responseType in responseTypeList 
                  if (selectedResponseType === responseType)
                    option(value=responseType selected) #{responseType}
                  else
                    option(value=responseType) #{responseType}
            input(type="submit" value="Save Configuration" class="btn btn-primary")
            small(id="configurationHelp" class="form-text text-muted") Future calls to /authorize will use these values. They will be reset when the app restarts.

    div(class="col-sm-6") &nbsp;
